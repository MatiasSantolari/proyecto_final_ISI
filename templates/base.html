<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}MiApp{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- AdminLTE -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">

  <style>
    body {
      background-color:rgb(255, 255, 255);
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      padding-top: 30px;
    }

    .navbar {
      z-index: 1100;
    }

    .main-sidebar {
      position: fixed;
      left: 0;
      height: calc(100% - 56px);
      z-index: 1200;
    }

    footer.app-footer {
      transition: margin-left 0.3s ease;
      background-color: #e6e5e5;
      padding: 10px 20px;
      text-align: center;
      font-size: 0.9rem;
      color: #555;
    }

    body:not(.sidebar-collapse) footer.app-footer {
      margin-left: 250px;
    }

    body.sidebar-collapse footer.app-footer {
      margin-left: 72px;
    }

    @media (max-width: 768px) {
      footer.app-footer {
        margin-left: 0 !important;
      }
    }


    .bg-soft-success   { background-color: #d4edda !important; }
    .bg-soft-warning   { background-color: #fff3cd !important; }
    .bg-soft-info      { background-color: #d1ecf1 !important; }
    .bg-soft-primary   { background-color: #cce5ff !important; }
    .bg-soft-danger    { background-color: #f8d7da !important; }
    .bg-soft-secondary { background-color: #e2e3e5 !important; }
    .bg-soft-mint      { background-color: #d1f2eb !important; }
    .border-mint       { border-color: #1abc9c !important;}
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed" data-keep-expanded="true">
<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light shadow-sm fixed-top px-4 py-2" style="z-index:1100;">
    <div class="collapse navbar-collapse" id="navbarContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
      </ul>    

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>
      </ul>

      <form class="d-flex me-3" role="search">
        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Buscar">
        <button class="btn btn-outline-primary" type="submit">
          <i class="fas fa-search"></i>
        </button>
      </form>

      <ul class="navbar-nav mb-2 mb-lg-0">
        <li class="nav-item dropdown">
          <a class="nav-link position-relative" href="#" data-bs-toggle="dropdown">
            <i class="far fa-bell"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning">3</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><h6 class="dropdown-header">Notificaciones</h6></li>
            <li><a class="dropdown-item" href="#">Nueva solicitud recibida</a></li>
            <li><a class="dropdown-item" href="#">Actualización de perfil</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">Ver todas</a></li>
          </ul>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            <i class="fas fa-user-circle me-1"></i> {{ request.user.nombre_usuario }}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="{% url 'user_perfil' %}">Perfil</a></li>
            <li><a class="dropdown-item" href="#">Configuración</a></li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <form action="{% url 'logout' %}" method="post" style="display: block; margin: 0;">
                {% csrf_token %}
                <button type="submit" class="dropdown-item text-danger" style="background: none; border: none; width: 100%; text-align: left; padding-left: 1rem;">
                  Cerrar sesión
                </button>
              </form>
            </li>
          </ul>
        </li>
      </ul>
    </div>
</nav>


  <aside class="main-sidebar sidebar-dark-primary elevation-4" style="height: 100vh; overflow-y: auto;">
  <!-- Logo / título -->
  <a href="#" class="brand-link">
    <i class="fas fa-user-cog mx-2"></i>
    <span class="brand-text font-weight-light">RRHH System</span>
  </a>

  <div class="sidebar">
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
        
        {% if user.rol == 'admin' %}
        <!-- Poner las url que son para admin -->
        {% elif user.rol == 'gerente' %}
        <!-- Poner las url que son para gerente -->
        {% elif user.rol == 'jefe' %}
         <!-- Poner las url que son para jefe -->
        {% elif user.rol == 'empleado' %}
         <!-- Poner las url que son para empleado -->
        {% else %}
        <!-- Poner las url que son para normal -->
        {% endif %}

        <li class="nav-item"><a class="nav-link" href="{% url 'agregar_sueldo_base' %}"><i class="nav-icon fas fa-dollar-sign"></i><p>Agregar Sueldo Base</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'beneficios' %}"><i class="nav-icon fas fa-gift"></i><p>Beneficios</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'calcular_bonificaciones' %}"><i class="nav-icon fas fa-calculator"></i><p>Bonificaciones</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'capacitaciones' %}"><i class="nav-icon fas fa-chalkboard-teacher"></i><p>Capacitaciones</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'cargos' %}"><i class="nav-icon fas fa-briefcase"></i><p>Cargos</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'cargo_categoria' %}"><i class="nav-icon fas fa-layer-group"></i><p>Categorías de Cargos</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'competencias' %}"><i class="nav-icon fas fa-tasks"></i><p>Competencias</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contratos' %}"><i class="nav-icon fas fa-file-contract"></i><p>Contratos</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'costos_de_personal' %}"><i class="nav-icon fas fa-file-invoice-dollar"></i><p>Costos de Personal</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'criterios_evaluacion' %}"><i class="nav-icon fas fa-check-double"></i><p>Criterios Evaluación</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'departamentos' %}"><i class="nav-icon fas fa-building"></i><p>Departamentos</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'empleados' %}"><i class="nav-icon fas fa-users"></i><p>Empleados</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'evaluacion_desempeno' %}"><i class="nav-icon fas fa-chart-line"></i><p>Evaluación Desempeño</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'habilidades' %}"><i class="nav-icon fas fa-brain"></i><p>Habilidades</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'instituciones' %}"><i class="nav-icon fas fa-university"></i><p>Instituciones</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'logros' %}"><i class="nav-icon fas fa-award"></i><p>Logros</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'nominas' %}"><i class="nav-icon fas fa-id-card"></i><p>Nóminas</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'objetivos' %}"><i class="nav-icon fas fa-bullseye"></i><p>Objetivos</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'personas' %}"><i class="nav-icon fas fa-user"></i><p>Personas</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'postulantes' %}"><i class="nav-icon fas fa-user-plus"></i><p>Postulantes</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'publicar_ofertas_de_empleo' %}"><i class="nav-icon fas fa-bullhorn"></i><p>Ofertas de Empleo</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'registrar_asistencia' %}"><i class="nav-icon fas fa-calendar-check"></i><p>Asistencia</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'solicitudes_nuevos_empleados' %}"><i class="nav-icon fas fa-user-edit"></i><p>Solicitudes Nuevos Empleados</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'tipo_criterio_evaluacion' %}"><i class="nav-icon fas fa-list-alt"></i><p>Tipo de Criterio</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'tipos_contrato' %}"><i class="nav-icon fas fa-file-signature"></i><p>Tipos de Contrato</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'competencias_faltantes' %}"><i class="nav-icon fas fa-exclamation-circle"></i><p>Competencias Faltantes</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'costos_de_contratacion' %}"><i class="nav-icon fas fa-coins"></i><p>Costos de Contratación</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'reporte_evaluacion_desempeno' %}"><i class="nav-icon fas fa-file-alt"></i><p>Reporte Desempeño</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contratar_nuevo_empleado' %}"><i class="nav-icon fas fa-user-check"></i><p>Contratar Nuevo</p></a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'ausencias_retardos' %}"><i class="nav-icon fas fa-clock"></i><p>Ausencias y Retardos</p></a></li>
      </ul>
    </nav>
  </div>
</aside>


  <!-- Contenido principal -->
  <div class="content-wrapper">
    {% block content %}
    {% endblock %}
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="float-end d-none d-sm-inline"><strong>Version</strong> 1.0</div>
    <strong>&copy; 2025 <a href="#" class="text-decoration-none">Sanbamero</a>.</strong> Todos los derechos reservados.
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>

  {% block extra_js %}{% endblock %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const body = document.body;
    const toggleButton = document.querySelector('[data-widget="pushmenu"]');

    if (localStorage.getItem('sidebar-collapsed') === 'true') {
      body.classList.add('sidebar-collapse');
    }

    if (toggleButton) {
      toggleButton.addEventListener('click', () => {
        const isCollapsed = body.classList.contains('sidebar-collapse');
        localStorage.setItem('sidebar-collapsed', !isCollapsed);
      });
    }
  });
</script>

</body>
</html>
